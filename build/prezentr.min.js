/**
 * prezentr - 0.2.0
 * url: https://github.com/benqus/prezentr
 * license: GPLv3 - https://github.com/benqus/prezentr/blob/master/LICENSE
 */
!function(a){var b={};a.prezentr&&(b._prezentr=a.prezentr),a.prezentr=b;var c=Array.prototype.slice,d=b.renderMethods={APPEND:"append",PREPEND:"prepend",BEFORE:"before",AFTER:"after"},e=function(a){return"function"==typeof a},f=function(a){return"undefined"!=typeof a&&null!==a},g=function(a){return"undefined"==typeof a},h=function(a){return"string"==typeof a},i=function(){var a=function(a){var b,c,d,e=a[0];if(a.length>0)for(c in a)if(a.hasOwnProperty(c)&&(b=a[c]))for(d in b)b.hasOwnProperty(d)&&(e[d]=b[d]);return e};return{left:function(){var b=c.call(arguments);return a(b)},create:function(){var b=c.call(arguments);return b.unshift({}),a(b)},right:function(){var b=c.call(arguments).reverse();return a(b)}}}(),j=b.EventHub={events:{},eventId:0,on:function(b,c,d,f){var g,i=this.events;return h(b)&&e(c)&&(i.hasOwnProperty(b)||(i[b]={}),g=this.eventId++,i[b][g]={id:g,once:f===!0,context:d||a,callback:c}),this},once:function(a,b,c){return this.on(a,b,c,!0),this},off:function(a,b,c){var d,g,i,j=this.events;if(h(a)){d=j[a];for(g in d)d.hasOwnProperty(g)&&this.offListener(d,d[g],b,c)}else if(e(b)||f(c)){for(g in j)if(j.hasOwnProperty(g)){d=j[g];for(i in d)d.hasOwnProperty(i)&&this.offListener(d,d[i],b,c)}}else this.events={};return this},trigger:function(a){var b,d,e=c.call(arguments,1),f=this.events[a];if(f instanceof Array)for(d in f)f.hasOwnProperty(d)&&(b=f[d],b.callback.apply(b.context,e),b.once===!0&&delete f[b.id]);return this},offListener:function(a,b,c,d){b.callback!==c&&e(c)||b.context!==d&&f(d)||delete a[b.id]}},k=b.Component=function(){};k.extend=function(a,b){var c,d=function(){},e=this;return c=a.hasOwnProperty("constructor")?a.constructor:function(){return e.apply(this,arguments)},d.prototype=e.prototype,c.prototype=i.left(new d,a,{constructor:c}),i.left(c,b,{mixes:e.mixes,extend:e.extend,implement:e.implement}),c},k.mixes=function(){for(var a,b,d=c.call(arguments),f=[];d.length>0;)b=d.shift(),f.push(e(b)?b.prototype:b);return a=i.create.apply(i,f),this.extend(a)},k.implement=function(){var a=c.call(arguments);return a.unshift(this.prototype),i.left.apply(i,a),this},k.prototype={constructor:k,eventHub:j,initialize:function(){return this},extend:function(){var a=c.call(arguments);return a.unshift(this),i.left.apply(i,a),this},pause:function(){return this},resume:function(){return this},destroy:function(){return this}};var l=b.AnimationQueue={namespaces:{},register:function(a,b){var c=this.namespaces;return h(a)&&f(b)&&(c.hasOwnProperty(a)||(c[a]=[]),c[a].push(b)),this},remove:function(a,b){var c,d=this.namespaces,e=d[a];if(h(a)&&e&&f(b))for(c=0;c<e.length;c++)if(b===e[c])return e.splice(c,1),this;return this},reset:function(){return this.namespaces={},this},isAnimating:function(a){return(this.namespaces[a]||[]).length>0}},m=b.View=k.extend({tagName:"div",constructor:function(a,b){var c,d=this.tagName;k.apply(this,arguments),h(b)?c=m.selectElement(b):g(b)&&d?c=document.createElement(d):b instanceof Element&&(c=b),this.presenter=a,this.element=c},find:function(a){return this.element.querySelector(a)},render:function(){return this.element},getElement:function(a){var b=this.element;return a instanceof m?b=a.element:a instanceof Element&&(b=a),b},appendTo:function(a){var b=this.element,c=this.getElement(a);return b&&c instanceof Element&&c.appendChild(b),this},append:function(a,b){var c=this.find(b)||this.element,d=this.getElement(a);return c.appendChild(d),this},prepend:function(a,b){var c=(this.find(b)||this.element).firstChild,d=this.getElement(a);return c&&d?c.insertBefore(d):this.append(a,b),this},before:function(a,b){var c=this.find(b),d=this.getElement(a);return c&&c.parentNode&&c.parentNode.insertBefore(d,c),this},after:function(a,b){var c=this.find(b),d=(c||{}).nextSibling,e=this.getElement(a);return d&&d.parentNode?d.parentNode.insertBefore(e,d):c&&c.parentNode&&c.parentNode.appendChild(e),this},remove:function(){var a=this.element,b=a.parentNode;return b&&b.removeChild(a),this},destroy:function(){return this.remove(),k.prototype.destroy.apply(this,arguments)},selectElement:function(a){return document.querySelector(a)}}),n=b.Presenter=k.extend({viewClass:m,animationQueue:l,constructor:function(){var a,b=this.viewClass;k.apply(this,arguments),e(b)&&(a=new b(this)),this.view=a},initialize:function(){var a=this.view;return a.initialize.apply(a,arguments),k.prototype.initialize.apply(this,arguments)},addTo:function(a,b){return b&&a instanceof o&&a.add(b,this),this},getView:function(){return this.view},update:function(){return this.view.reRender(),this},remove:function(){return this.view.remove(),this},reRender:function(){return this.remove().render(),this},render:function(a){return this.view.render(a),this.view},destroy:function(){return this.view.destroy(),k.prototype.destroy.apply(this,arguments)}}),o=b.PresenterGroup=n.extend({renderMappings:{},renderMethods:{},renderOrder:[],constructor:function(){n.apply(this,arguments),this._children_={}},reconstruct:function(){return this.destroy(),o.apply(this,arguments),this},initialize:function(){var a,b,c=this._children_;for(b in c)c.hasOwnProperty(b)&&(a=c[b],a.initialize.apply(a,arguments));return n.prototype.initialize.apply(this,arguments)},add:function(a,b){var c=this._children_;return h(a)&&b instanceof n&&!c.hasOwnProperty(a)&&(c[a]=b),this},empty:function(){var a,b=this._children_;for(a in b)b.hasOwnProperty(a)&&b[a].remove();return this},remove:function(a){var b=this._children_,c=b[a];return c&&(c.destroy(),delete b[a]),this},removeAll:function(){var a,b=this._children_;for(a in b)b.hasOwnProperty(a)&&this.remove(a);return this},reRender:function(a,b){return this.empty(),n.prototype.reRender.apply(this,arguments),this.renderChildren(a,b),this},render:function(){var a=n.prototype.render.apply(this,arguments);return this.renderChildren.apply(this,arguments),a},renderChildren:function(a,b){var c,e,f,g=b||{},h=this._children_,i={},j=g.renderMappings||this.renderMappings,k=g.renderMethods||this.renderMethods,l=g.renderOrder||this.renderOrder;if(l&&l.length)for(f=0;f<l.length;f++)h.hasOwnProperty(e=l[f])&&(i[e]=!0,c=k[e]||k["*"]||d.APPEND,this.renderChild(e,c,j[f],a||{}));for(f in h)h.hasOwnProperty(f)&&!i[f]&&(c=k[f]||k["*"]||d.APPEND,this.renderChild(f,c,j[f],a||{}));return this},renderChild:function(a,b,c,d){var e,f=this._children_[a];return f&&(e=f.render(d),this.view[b](e,c)),this},destroy:function(){return this.removeAll.apply(this,arguments),n.prototype.destroy.apply(this,arguments)}});b.Block=k.extend({mainClass:void 0,constructor:function(a){if(!(a instanceof Element))throw new Error("Must... Specify... DOM root... (Please provide an Element for the constructor of the Block)");var b,c=this.mainClass;k.apply(this,arguments),f(c)&&(b=new c),this.initialized=!1,this.element=a,this.root=b},initialize:function(){var a=this.root;return a&&!this.initialized&&(a.initialize.apply(a,arguments),this.initialized=!0),k.prototype.initialize.apply(this,arguments)},render:function(){var a=this.root;return a&&a.render.apply(a,arguments).appendTo(this.element),this},destroy:function(){var a=this.root;return a&&a.destroy(),this.initialized=!1,k.prototype.destroy.apply(this,arguments)}})}(function(){return this}());